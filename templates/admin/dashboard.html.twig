{% extends '@EasyAdmin/page/content.html.twig' %}

{% block content %}
    <div class="col py-3">
    <h1>Dashboard</h1>
    <p>New temporary passwords to give :</p>
    {% for user in users %}
        {% if "TEMP_" in user.password %}
            <div class="mb-2">
                <span class="badge bg-primary-subtle text-primary-emphasis rounded-pill">{{ user.email }}</span>
                 : 
                <span class="badge bg-light-subtle border border-light-subtle text-light-emphasis" onclick="copyToClipboard('{{ user.password }}')">{{ user.password }}</span>
                <span id="copiedText" style="display: none;">
                    copied
                    <i class="fas fa-check text-gray"></i>
                </span>
            </div>
        {% endif %}
    {% endfor %}
    </div>

    
    <script>
    function copyToClipboard(text) {
        const textarea = document.createElement('textarea');
        textarea.value = text;
        document.body.appendChild(textarea);
        textarea.select();
        document.execCommand('copy');
        document.body.removeChild(textarea);
        
        const copiedText = document.getElementById('copiedText');
        copiedText.style.display = 'inline';
        copiedText.style.color = 'gray';
        setTimeout(function() {
            copiedText.style.display = 'none';
        }, 2000);
    }
    </script>
{% endblock %}

